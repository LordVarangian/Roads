custom_button = {
	name = change_regional_capital
	tooltip = CHANGE_REGIONAL_CAPITAL_TT
	potential = { always = yes }
	frame = { 
       number = 1
       trigger = { always = yes }
   	}
	trigger = {
		owner = {
			adm_power = 100
		}
		NOT = {
			has_province_modifier = regional_capital_modifier
		}
	}
	effect = {
		owner = {
			add_adm_power = -100
		}
		region = {
			if = {
				limit = {
					has_province_modifier = regional_capital_modifier
				}
				remove_province_modifier = regional_capital_modifier
			}
		}
		add_province_modifier = {
			name = regional_capital_modifier
			duration = -1
		}
	}
}

custom_button = {
	name = open_trading_city_button
	tooltip = open_trading_city_buttontt
	potential = {
		FROM = { has_government_attribute = can_use_trade_post }
	}
   frame = { 
       number = 1
       trigger = { 
			always = yes
		}
   }
	trigger = {
		if = {
			limit = {
				NOT = { has_province_flag = trade_outpost_built }
			}
			province_has_center_of_trade_of_level = 1
			NOT = { owned_by = FROM }
			owner = {
				has_opinion = {
					who = FROM
					value = 150
				}
			}
		}
	}
	effect = { 
		if = {
			limit = {
				NOT = { has_province_flag = trade_outpost_built }
			}
			set_province_flag = trade_outpost_built
		}
		else = {
			FROM = { set_country_flag = trade_outpost_menu_opened_flag } 
		}
	}
}

custom_button = {
	name = close_trading_city_button
	potential = { 
		FROM = { has_country_flag = trade_outpost_menu_opened_flag } 
		FROM = { has_government_attribute = can_use_trade_post }
		has_province_flag = trade_outpost_built
	}
	effect = { FROM = { clr_country_flag = trade_outpost_menu_opened_flag } }
	tooltip = building_menu_button_back_tt
}

custom_icon = {
	name = trade_post_menu
	potential = {
		FROM = { has_government_attribute = can_use_trade_post }
		FROM = { has_country_flag = trade_outpost_menu_opened_flag }
		has_province_flag = trade_outpost_built
	}
	frame = { number = 1 trigger = { has_province_flag = trade_outpost_built } }
	frame = { number = 2 trigger = { NOT = { has_province_flag = trade_outpost_built } } }
}

custom_button = {
	name = build_base_outpost
	potential = { 
		FROM = { has_country_flag = trade_outpost_menu_opened_flag } 
		FROM = { has_government_attribute = can_use_trade_post }
		has_province_flag = trade_outpost_built
		NOT = {
			has_province_flag = built_base_outpost_flag
		}
	}
	trigger = {
		FROM = { years_of_income = 0.25 }
	}
	effect = { 
		set_province_flag = built_base_outpost_flag
		FROM = { add_years_of_income = -0.25 }
		add_trade_modifier = {
			who = FROM
			duration = -1
			power = 25
			key = BASE_OUTPOST_BUILT
		}
	}
	tooltip = slot1_tt
}

custom_icon = {
	name = base_outpost_built
	tooltip = GRANT_25_TRADE_POWER
	potential = {
		FROM = { has_government_attribute = can_use_trade_post }
		FROM = { has_country_flag = trade_outpost_menu_opened_flag }
		has_province_flag = trade_outpost_built
		has_province_flag = built_base_outpost_flag
	}
	frame = { number = 1 trigger = { always = yes } }
}

################################
## Slot 1
################################

custom_button = {
	name = trade_post_slot1
	potential = { 
		FROM = { has_country_flag = trade_outpost_menu_opened_flag } 
		FROM = { has_government_attribute = can_use_trade_post }
		has_province_flag = trade_outpost_built
	}
	trigger = {
		has_province_flag = built_base_outpost_flag
	}
	effect = { 
		if = {
			limit = {
				FROM = {
					NOT = {
						has_country_flag = viewing_slot_1_buildings
					}
				}
			}
			FROM = {
				clear_other_buildings_view = yes
				set_country_flag = viewing_slot_1_buildings
			}
		}
		else = {
			FROM = {
				clr_country_flag = viewing_slot_1_buildings
			}
		}
	}
	tooltip = slot1_tt
}

custom_button = {
	name = build_trade_hub
	potential = { 
		FROM = { has_country_flag = trade_outpost_menu_opened_flag } 
		FROM = { has_government_attribute = can_use_trade_post }
		has_province_flag = trade_outpost_built
		FROM = { has_country_flag = viewing_slot_1_buildings }
		NOT = {
			has_province_flag = built_slot_1
		}
	}
	trigger = {
		FROM = { years_of_income = 0.5 }
	}
	effect = { 
		set_country_flag = built_trade_hub
		set_province_flag = built_slot_1
		FROM = { clr_country_flag = viewing_slot_1_buildings }
		FROM = { add_years_of_income = -0.5 }
		add_trade_modifier = {
			who = FROM
			duration = -1
			power = 25
			key = TRADE_HUB_BUILT
		}
	}
	tooltip = slot1_tt
}

custom_button = {
	name = build_overseas_mercenaries_post
	potential = { 
		FROM = { has_country_flag = trade_outpost_menu_opened_flag } 
		FROM = { has_government_attribute = can_use_trade_post }
		has_province_flag = trade_outpost_built
		FROM = { has_country_flag = viewing_slot_1_buildings }
		NOT = {
			has_province_flag = built_slot_1
		}
	}
	trigger = {
		FROM = { years_of_income = 0.5 }
	}
	effect = { 
		set_province_flag = built_overseas_mercenary_post
		set_province_flag = built_slot_1
		FROM = { add_years_of_income = -0.5 }
		add_base_manpower = 1
		FROM = { clr_country_flag = viewing_slot_1_buildings }
	}
	tooltip = slot1_tt
}

custom_icon = {
	name = trade_post_slot1_built
	potential = {
		FROM = { has_government_attribute = can_use_trade_post }
		FROM = { has_country_flag = trade_outpost_menu_opened_flag }
		has_province_flag = trade_outpost_built
		has_province_flag = built_slot_1
	}
	frame = { number = 1 trigger = { has_province_flag = built_trade_hub } }
	frame = { number = 2 trigger = { has_province_flag = built_overseas_mercenary_post } }
}

custom_button = {
	name = destroy_slot_1_post
	potential = { 
		FROM = { has_country_flag = trade_outpost_menu_opened_flag } 
		FROM = { has_government_attribute = can_use_trade_post }
		has_province_flag = trade_outpost_built
		has_province_flag = built_slot_1
	}
	trigger = {

	}
	effect = { 
		if = {
			limit = {
				has_province_flag = built_trade_hub
			}
			remove_trade_modifier = {
				who = FROM
				key = TRADE_HUB_BUILT
			}
		}
		if = {
			limit = {
				has_province_flag = built_overseas_mercenary_post
			}
			add_base_manpower = -1
		}
		clr_province_flag = built_trade_hub
		clr_province_flag = built_overseas_mercenary_post
		clr_province_flag = built_slot_1
	}
	tooltip = destroy_slot
}

custom_button = {
	name = recruit_foreign_mercenaries
	potential = { 
		FROM = { has_country_flag = trade_outpost_menu_opened_flag } 
		FROM = { has_government_attribute = can_use_trade_post }
		has_province_flag = trade_outpost_built
		has_province_flag = built_slot_1
		has_province_flag = built_overseas_mercenary_post
	}
	trigger = {

	}
	effect = { 
		#Do effects here
	}
	tooltip = build_mercenaries
}

################################
## Slot 2
################################

custom_button = {
	name = trade_post_slot2
	potential = { 
		FROM = { has_country_flag = trade_outpost_menu_opened_flag } 
		FROM = { has_government_attribute = can_use_trade_post }
		has_province_flag = trade_outpost_built
	}
	trigger = {
		has_province_flag = built_base_outpost_flag
	}
	effect = {
		if = {
			limit = {
				FROM = {
					NOT = {
						has_country_flag = viewing_slot_2_buildings
					}
				}
			}
			FROM = {
				clear_other_buildings_view = yes
				set_country_flag = viewing_slot_2_buildings
			}
		}
		else = {
			FROM = {
				clr_country_flag = viewing_slot_2_buildings
			}
		}
	}
	tooltip = slot1_tt
}

custom_button = {
	name = build_trade_port
	potential = { 
		FROM = { has_country_flag = trade_outpost_menu_opened_flag } 
		FROM = { has_government_attribute = can_use_trade_post }
		has_province_flag = trade_outpost_built
		FROM = { has_country_flag = viewing_slot_2_buildings }
		NOT = {
			has_province_flag = built_slot_2
		}
	}
	trigger = {
		FROM = { years_of_income = 0.75 }
	}
	effect = { 
		set_country_flag = built_trade_port
		set_province_flag = built_slot_2
		FROM = { add_years_of_income = -0.75 }
		add_trade_modifier = {
			who = FROM
			duration = -1
			power = 55
			key = TRADE_PORT_BUILT
		}
		FROM = { clr_country_flag = viewing_slot_2_buildings }
	}
	tooltip = slot1_tt
}

custom_button = {
	name = build_shipyard
	potential = { 
		FROM = { has_country_flag = trade_outpost_menu_opened_flag } 
		FROM = { has_government_attribute = can_use_trade_post }
		has_province_flag = trade_outpost_built
		FROM = { has_country_flag = viewing_slot_2_buildings }
		NOT = {
			has_province_flag = built_slot_2
		}
	}
	trigger = {
		FROM = { years_of_income = 0.75 }
	}
	effect = { 
		set_country_flag = built_shipyard
		set_province_flag = built_slot_2
		FROM = { add_years_of_income = -0.75 }
		custom_tooltip = ADD_2_NAVAL_FL
		hidden_effect = {
			FROM = {
				add_government_power = {
					mechanic_type = scaling_modifiers
					power_type = navy_forcelimit_trade_outposts
					value = 2
				}
			}
		}
		FROM = { clr_country_flag = viewing_slot_2_buildings }
	}
	tooltip = slot1_tt
}

custom_button = {
	name = build_fishery
	potential = { 
		FROM = { has_country_flag = trade_outpost_menu_opened_flag } 
		FROM = { has_government_attribute = can_use_trade_post }
		has_province_flag = trade_outpost_built
		FROM = { has_country_flag = viewing_slot_2_buildings }
		NOT = {
			has_province_flag = built_slot_2
		}
	}
	trigger = {
		FROM = { years_of_income = 0.75 }
	}
	effect = { 
		set_country_flag = built_fishery
		set_province_flag = built_slot_2
		FROM = { add_years_of_income = -0.75 }
		add_province_modifier = {
			name = fishery_modifier
			duration = -1
		}
		FROM = { clr_country_flag = viewing_slot_2_buildings }
	}
	tooltip = slot1_tt
}

custom_icon = {
	name = trade_post_slot2_built
	potential = {
		FROM = { has_government_attribute = can_use_trade_post }
		FROM = { has_country_flag = trade_outpost_menu_opened_flag }
		has_province_flag = trade_outpost_built
		has_province_flag = built_slot_2
	}
	frame = { number = 1 trigger = { has_province_flag = built_fishery } }
	frame = { number = 2 trigger = { has_province_flag = built_shipyard } }
	frame = { number = 3 trigger = { has_province_flag = built_trade_port } }
}

custom_button = {
	name = destroy_slot_2_post
	potential = { 
		FROM = { has_country_flag = trade_outpost_menu_opened_flag } 
		FROM = { has_government_attribute = can_use_trade_post }
		has_province_flag = trade_outpost_built
		has_province_flag = built_slot_2
	}
	trigger = {

	}
	effect = { 
		if = {
			limit = {
				has_province_flag = built_trade_port
			}
			remove_trade_modifier = {
				who = FROM
				key = TRADE_PORT_BUILT
			}
		}
		if = {
			limit = {
				has_province_flag = built_fishery
			}
			remove_province_modifier = fishery_modifier
		}
		if = {
			limit = {
				has_province_flag = built_shipyard
			}
			FROM = {
				add_government_power = {
					mechanic_type = scaling_modifiers
					power_type = navy_forcelimit_trade_outposts
					value = -2
				}
			}
		}
		clr_province_flag = built_fishery
		clr_province_flag = built_shipyard
		clr_province_flag = built_trade_port
		clr_province_flag = built_slot_2
	}
	tooltip = destroy_slot
}

################################
## Slot 3
################################

custom_button = {
	name = build_slot3
	potential = { 
		FROM = { has_country_flag = trade_outpost_menu_opened_flag } 
		FROM = { has_government_attribute = can_use_trade_post }
		has_province_flag = trade_outpost_built
		NOT = { has_province_flag = built_slot_3 }
	}
	trigger = {
		has_province_flag = built_base_outpost_flag
		FROM = { years_of_income = 0.25 }
	}
	effect = { 
		set_province_flag = built_slot_3
		FROM = { add_years_of_income = -0.25 }
		add_province_modifier = {
			name = workshop_built
			duration = -1
		}
		add_base_production = 1
	}
	tooltip = slot1_tt
}

custom_icon = {
	name = trade_post_slot3_built
	potential = {
		FROM = { has_government_attribute = can_use_trade_post }
		FROM = { has_country_flag = trade_outpost_menu_opened_flag }
		has_province_flag = trade_outpost_built
		has_province_flag = built_slot_3
	}
	frame = { number = 1 trigger = { always = yes } }
}

custom_button = {
	name = destroy_slot_3_post
	potential = { 
		FROM = { has_country_flag = trade_outpost_menu_opened_flag } 
		FROM = { has_government_attribute = can_use_trade_post }
		has_province_flag = built_slot_3
	}
	trigger = {

	}
	effect = { 
		clr_province_flag = built_slot_3
		add_base_production = -1
		remove_province_modifier = workshop_built
	}
	tooltip = slot1_tt
}

################################
## Slot 4
################################

custom_button = {
	name = build_slot4
	potential = { 
		FROM = { has_country_flag = trade_outpost_menu_opened_flag } 
		FROM = { has_government_attribute = can_use_trade_post }
		has_province_flag = trade_outpost_built
		NOT = { has_province_flag = built_slot_4 }
	}
	trigger = {
		has_province_flag = built_base_outpost_flag
	}
	effect = { 
		set_province_flag = built_slot_4
		change_religion = FROM
	}
	tooltip = slot1_tt
}

custom_icon = {
	name = slot_4_built
	potential = {
		FROM = { has_government_attribute = can_use_trade_post }
		FROM = { has_country_flag = trade_outpost_menu_opened_flag }
		has_province_flag = trade_outpost_built
		has_province_flag = built_slot_4
	}
	frame = { number = 1 trigger = { always = yes } }
}

custom_button = {
	name = destroy_slot_4_post
	potential = { 
		FROM = { has_country_flag = trade_outpost_menu_opened_flag } 
		FROM = { has_government_attribute = can_use_trade_post }
		has_province_flag = built_slot_4
	}
	trigger = {

	}
	effect = { 
		clr_province_flag = built_slot_4
	}
	tooltip = slot1_tt
}

################################
## Slot 5
################################

custom_button = {
	name = build_slot5
	potential = { 
		FROM = { has_country_flag = trade_outpost_menu_opened_flag } 
		FROM = { has_government_attribute = can_use_trade_post }
		has_province_flag = trade_outpost_built
		NOT = { has_province_flag = built_slot_5 }
	}
	trigger = {
		FROM = {
			years_of_income = 0.1
		}
		has_province_flag = built_base_outpost_flag
	}
	effect = { 
		set_province_flag = built_slot_5
		add_province_modifier = {
			name = coastal_defence_built
			duration = -1
		}
		FROM = {
			add_years_of_income = -0.1
		}
	}
	tooltip = slot1_tt
}

custom_icon = {
	name = slot_5_built
	potential = {
		FROM = { has_government_attribute = can_use_trade_post }
		FROM = { has_country_flag = trade_outpost_menu_opened_flag }
		has_province_flag = trade_outpost_built
		has_province_flag = built_slot_5
	}
	frame = { number = 1 trigger = { always = yes } }
}

custom_button = {
	name = destroy_slot_5_post
	potential = { 
		FROM = { has_country_flag = trade_outpost_menu_opened_flag } 
		FROM = { has_government_attribute = can_use_trade_post }
		has_province_flag = built_slot_5
	}
	trigger = {

	}
	effect = { 
		clr_province_flag = built_slot_5
		remove_province_modifier = coastal_defence_built
	}
	tooltip = slot1_tt
}

################################
## Slot 6
################################

custom_button = {
	name = build_slot6
	potential = { 
		FROM = { has_country_flag = trade_outpost_menu_opened_flag } 
		FROM = { has_government_attribute = can_use_trade_post }
		has_province_flag = trade_outpost_built
		NOT = { has_province_flag = built_slot_6 }
	}
	trigger = {
		has_province_flag = built_base_outpost_flag
		FROM = {
			years_of_income = 1.5
		}
	}
	effect = { 
		FROM = {
			add_years_of_income = -1.5
		}
		set_province_flag = built_slot_6
		custom_tooltip = WILL_CHANGE_PROVINCE_OWNERSHIP_TO_US_WHEN_GOING_TO_WAR
	}
	tooltip = slot1_tt
}

custom_icon = {
	name = slot_6_built
	potential = {
		FROM = { has_government_attribute = can_use_trade_post }
		FROM = { has_country_flag = trade_outpost_menu_opened_flag }
		has_province_flag = trade_outpost_built
		has_province_flag = built_slot_6
	}
	frame = { number = 1 trigger = { always = yes } }
}

custom_button = {
	name = destroy_slot_6_post
	potential = { 
		FROM = { has_country_flag = trade_outpost_menu_opened_flag } 
		FROM = { has_government_attribute = can_use_trade_post }
		has_province_flag = built_slot_6
	}
	trigger = {

	}
	effect = { 
		clr_province_flag = built_slot_6
	}
	tooltip = slot1_tt
}

#######################
## Terrain Code
#######################

custom_icon = {
	name = province_upgraded_terrain
	potential = {
		has_province_flag = performed_province_terrain_action
	}
	tooltip = TERRAIN_TT
}

custom_icon = {
	name = override_terrain_text
	potential = {
		NOT = { has_province_flag = performed_province_terrain_action }
	}
	tooltip = TERRAIN_MODIFIERS_TT
}

custom_button = {
	name = change_terrain
	potential = {
		has_terrain = woods
		NOT = {
			has_province_flag = performed_province_terrain_action
		}
	}
	trigger = {

	}
	effect = { 
		custom_tooltip = CHANGE_TERRAIN_OF_WOODS
		hidden_effect = {
			set_province_flag = performed_province_terrain_action
		}
	}
	tooltip = CHANGE_TERRAIN_TT
}